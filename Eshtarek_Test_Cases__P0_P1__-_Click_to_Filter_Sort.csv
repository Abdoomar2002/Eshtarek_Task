Priority,Page,Role,Scenario,Steps,Expected Result,API / Endpoint,Notes
P0,Login,Platform Admin,Login success (admin),Open login → enter admin@eshtarek.com / admin123 → Submit,Redirect to admin dashboard; token stored; name/role shown,"POST /api/auth/login/, GET /api/auth/me/",
P0,Login,Tenant Admin,Login success (tenant admin),Enter tenant admin creds (TechCorp) → Submit,Redirect to tenant dashboard; token stored; tenant name visible,"POST /api/auth/login/, GET /api/auth/me/",
P0,Login,Any,Invalid credentials,Enter wrong password → Submit,Inline error message; no token stored; stays on login,POST /api/auth/login/,
P1,Register,Anonymous,Register new tenant admin,Open register → fill email/password/tenant name → Submit,Account & tenant created; auto-login or redirect to login with success,POST /api/auth/register/,
P0,Auth,Any,Logout,Click logout,Token cleared/blacklisted; redirected to login; further API calls 401,"POST /api/auth/logout/, GET /api/auth/me/",
P1,Auth,Any,Expired token refresh,Force token expiration (or wait) → navigate protected page,Silent refresh or redirect to login depending on implementation,POST /api/auth/refresh/,
P0,Plan Selector,Tenant Admin,List available plans,Open Plan Selector as tenant admin,Plans (Free/Pro/Enterprise) load with prices & limits,GET /api/subscriptions/plans/,
P0,Plan Selector,Tenant Admin,Subscribe to a plan (new tenant),Click Subscribe on Pro,Success toast; current plan updates; dashboard reflects limits,POST /api/subscriptions/,
P0,Plan Selector,Tenant Admin,Upgrade Free → Pro,Tenant on Free → choose Pro → confirm,Plan becomes Pro; usage limits increased; billing mock triggered (if enabled),POST /api/subscriptions/,
P0,Plan Selector,Tenant Admin,Downgrade Pro → Free (over limit),Have > Free max users → attempt downgrade to Free,Operation blocked with clear message explaining user overage,POST /api/subscriptions/,Business rule must prevent downgrade when over limit
P1,Plan Selector,Tenant Admin,Downgrade Pro → Free (within limit),Users <= Free limit → downgrade,Plan becomes Free; limits reduced; dashboard reflects change,POST /api/subscriptions/,
P0,Tenant Dashboard,Tenant Admin,Loads tenant summary,Login as tenant admin → open dashboard,"Shows tenant name, current plan, user count, basic stats","GET /api/subscriptions/, GET /api/users/",
P0,Tenant Dashboard,Tenant Admin,Cross-tenant isolation (UI),Manipulate URL/ID to another tenant resource,404/Access denied; no foreign data displayed,,
P0,Users,Tenant Admin,List users (scoped),Open Users page,Only users from current tenant displayed,GET /api/users/,
P0,Users,Tenant Admin,Create user within plan limit,Click Add User → fill form → Save,User appears in list; count increments,POST /api/users/,
P0,Users,Tenant Admin,Create user beyond plan limit,Reach limit then add one more user,Operation rejected with clear validation message,POST /api/users/,
P0,Users,Tenant Admin,Edit user (role/name),Open user → update fields → Save,Persisted changes shown in list,PUT /api/users/{id}/,
P0,Users,Tenant Admin,Delete/disable user,Click delete/disable → confirm,User removed or marked inactive; count updates,DELETE /api/users/{id}/ or PATCH,
P1,Users,Tenant Admin,Search/filter,Use search input / filters,List filtered correctly; empty state appears when none,GET /api/users/?q=,
P0,Users,Tenant User,Permissions: cannot access Users page,Login as Tenant User → try navigate to Users page,UI hides link; direct URL returns 403/404,GET /api/users/,
P0,Billing,Tenant Admin,Process payment success,Open Billing → click Pay/Subscribe Now,Success message; invoice record appears,"POST /api/billing/process-payment/, GET /api/billing/invoices/",
P1,Billing,Tenant Admin,Idempotency (double click),Click pay twice quickly,Only one invoice/charge created,POST /api/billing/process-payment/,"If not implemented, state limitation in video"
P1,Billing,Tenant Admin,Failed payment path,Trigger mock failure (invalid amount or flag),Plan unchanged; error toast; failure logged,POST /api/billing/process-payment/,
P0,Admin → Tenants,Platform Admin,List all tenants,Login as platform admin → open Tenants,All tenants listed with status/plan,GET /api/tenants/,
P0,Admin → Tenants,Platform Admin,View tenant details,Click a tenant row,"Tenant profile with plan, users, status",GET /api/tenants/{id}/,
P0,Admin → Tenants,Platform Admin,Create tenant,Click New Tenant → fill name/owner → Save,Tenant appears in list,POST /api/tenants/,
P1,Admin → Tenants,Platform Admin,Suspend/activate tenant,Toggle status,Status updated; tenant login restricted if suspended,PATCH /api/tenants/{id}/status,
P0,Admin → Plans,Platform Admin,List plans,Open Plans,All active plans listed with price/limits,GET /api/subscriptions/plans/,
P0,Admin → Plans,Platform Admin,Create plan,"New plan → fill fields (name, price, max_users, features) → Save",Plan visible; selectable by tenants,POST /api/subscriptions/plans/,
P0,Admin → Plans,Platform Admin,Edit plan,Change price or limits → Save,Changes reflected in plan selector,PUT /api/subscriptions/plans/{id}/,
P0,Admin → Plans,Platform Admin,Deactivate plan,Toggle active=false,Plan disappears from tenant selector (existing subs unaffected),PATCH /api/subscriptions/plans/{id}/,
P0,Security,Tenant User,Block platform admin pages,Tenant User opens /admin routes,403/404; UI shouldn’t show links,,
P0,Security,Anonymous,Redirect to login on protected routes,Open dashboard URL while logged out,Redirect to login; no data leakage,,
P0,Security,Any,No cross-tenant data by ID,Use valid ID from another tenant in URL/API,404/403; response does not reveal existence,GET /api/users/{id}/ etc.,
P1,Navigation,Any,Role-aware navbar,Login as each role,Only relevant links appear (Admin vs Tenant Admin vs Tenant User),,
P1,States,Any,Loading / Empty / Error states,Throttle network / simulate empty lists,Skeletons or spinners; empty copy; error toasts,,
P1,Routing,Any,Unknown route → 404 page,Open /not-found,Consistent 404 page,,
P0,API Docs,Any,Swagger/ReDoc accessible,Open /api/docs and /api/redoc,Schemas load without errors,"GET /api/docs, /api/redoc",
